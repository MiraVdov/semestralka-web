<!--Javascript import-->
<script src="libraries/bootstrap-5.0.2-dist/js/bootstrap.min.js"></script>
<!--jquery import-->
<script src="libraries/jquery/jquery-3.5.1.min.js"></script>

<!--CKEDITOR import-->
<script src="ckEditor/ckeditor.js"></script>

<!--scripts-->
<script>
    //funkce slouzi  zobrazeni loginu
    $(document).ready(function () {
        $("#btnLogin, #loginFade").click(function () {
            $("#loginForm").fadeIn();
        });

        // funkce slouzi k zavreni loginu
        $("#closeButton").click(function () {
            $("#loginForm").fadeOut();
        });

        // formátování datumu
        dateFormat();

        $("#newArticleDiv").hide();

        $("#addNewArticle").click(function () {
           $("#newArticleDiv").show(500);
        });

        $("#closeNewArticleDiv").click(function () {
            $("#newArticleDiv").hide(500);
        });

        $(".pdfFiles").hide();
        $(".hidePDFFiles").hide();
    });

    // funkce slouzi k zobrazeni hesel
    function password_show_hide() {
        var x = document.getElementById("password");
        var show_eye = document.getElementById("show_eye");
        var hide_eye = document.getElementById("hide_eye");
        hide_eye.classList.remove("d-none");
        if (x.type === "password") {
            x.type = "text";
            show_eye.style.display = "none";
            hide_eye.style.display = "block";
        } else {
            x.type = "password";
            show_eye.style.display = "block";
            hide_eye.style.display = "none";
        }
    }

    // metoda slouzi k zobrazeni hesel
    function password_show_hide2() {
        var x = document.getElementById("passwordRegistration");
        var show_eye = document.getElementById("show_eye2");
        var hide_eye = document.getElementById("hide_eye2");
        hide_eye.classList.remove("d-none");
        if (x.type === "password") {
            x.type = "text";
            show_eye.style.display = "none";
            hide_eye.style.display = "block";
        } else {
            x.type = "password";
            show_eye.style.display = "block";
            hide_eye.style.display = "none";
        }
    }

    // metoda slouží k formatovani datumu
    function dateFormat(){
        const months = ["ledna", "února", "března", "dubna", "května", "června", "července", "srpna", "září", "října", "listopadu", "prosince"];

        var dateArray = document.getElementsByClassName("articlesHeader");
        var numberOfArticles = dateArray.length;
        var date;
        for (let i = 0; i < numberOfArticles; i++) {
            date = new Date(dateArray[i].innerHTML);
            var minutes = date.getMinutes();
            var hours = date.getHours();
            if (minutes < 10) minutes = "0" + minutes;
            if (hours < 10) hours = "0" + hours;
            dateArray[i].innerHTML = date.getDate() + ". " + months[date.getMonth()] + " " + date.getFullYear() + " " + hours + ":" + minutes;
            dateArray[i].style.fontSize = "12px";
        }
    }

    function showPDFFile(index){
        $("#pdfFile" + index).show();
        $("#hidePDFFile" + index).show();
    }

    function hidePDFFile(index){
        $("#pdfFile" + index).hide();
        $("#hidePDFFile" + index).hide();
    }
    var previous;
    var indexx;

    function editArticle(index, indexOfArticle){
        previous = document.getElementById("body" + index).innerHTML;
        indexx = index;
        var title = document.getElementById("title"+index).innerText;
        var content = document.getElementById("content" + index).innerText;
        document.getElementById("body" + index).innerHTML = "<form method='post' enctype='multipart/form-data' autocomplete='on'> " +
            "<div class='mb-3 col-md-3 col-sm-12'>" +
           " <label for='Nadpis' class='form-label'>Nadpis</label>" +
       "<input type='text' class='form-control' id='Nadpis' name='titleEdit' value='"+title+"' placeholder='Nadpis' required></div>"+
        "<label for='abstract' class='form-label'>Abstrakt</label><br>"+
        "<textarea name='abstractEdit' id='editor' class='w-50' style='height: 10vw'>"+ content+"</textarea>"+
        "<br><label for='pdf_file' class='form-label'>Připojit soubor (.pdf)</label>"+
            "<div class='mb-3'>"+
                "<div class='mb-3 col-md-4 col-sm-12'>"+
                   "<input type='file' class='form-control' name='pdf_file' aria-label='pdf_file' accept='application/pdf' required>"+
                "</div>"+
            "</div>"+
            "<div class='row '>"+
                "<div style='text-align: center;'><button type='submit' class='btn btn-success' name='action' value='editArticle'>Upravit článek</button>"+
                "<input type='hidden' name='id_articleEdit' value='"+indexOfArticle+"'>"+
                "<button type='button' class='btn btn-danger ms-3' name='action' id='cancelEditArticle' value='cancelEditArticle' onclick='closeEdit()'>zrušit</button></div>"+
           "</div>"+
        "</form>";
    }

    function closeEdit(){
        document.getElementById("body" + indexx).innerHTML = previous;
    }

    ///////////////////////////CKEDITOR/////////////////////////
    ClassicEditor
        .create( document.querySelector( '#editor' ))
        .catch( error => {
            console.log( error );
        } );
</script>