{# vypis input elementu #}
{% macro inputElement(type, name, value, other) %}
    <input type="{{ type|default('text') }}" name="{{ name }}" value="{{ value|e }}" {{ other|default("") }} />
{% endmacro %}

{# 1 - superAdmin
   2 - admin
   3 - recenzent
   4 - auto
#}

{# row in table #}
{% macro tableRow(user, loggedUser, allRights) %}
    <tr>
        {# user id #}
        <td>{{ user.id_uzivatel }}</td>
        <td>{{ user.id_uzivatel }}</td>
        {# user login #}
        <td>{{ user.login }}</td>
        {# user name #}
        <td>{{ user.jmeno }}</td>

        {# logged user is superadmin #}
        {% if loggedUser.id_pravo == 1 %}
            {# superadmin cant change his role and cant ban himself#}
            {% if loggedUser.id_uzivatel != user.id_uzivatel %}
                <td style="width: 20%;">
                    <select class="form-select form-select-sm" aria-label="Default select example">
                        {# going through all rights#}
                        {% for right in allRights %}
                            {# if right is SuperAdmin dont show option #}
                            {% if right.nazev == "SuperAdmin" %}
                            {# else show name of right#}
                            {% else %}
                                <option value="{{ right.id_pravo }}"
                                        {# if user right is is same as right id -> selected#}
                                        {% if user.id_pravo == right.id_pravo%}
                                            selected
                                        {% endif %}
                                >{{ right.nazev }}</option>
                            {% endif%}
                        {% endfor %}
                    </select>
                </td>
                <td style="text-align: center">
                    <form method="post" >
                        <input type="hidden" name="id_user" value="{{ user.id_uzivatel }}">
                        <button type="submit" class="btn btn-danger" name="action" value="ban">Zakázat</button>
                    </form>
                </td>
            {% else %}
                <td>SuperAdmin</td>
                <td></td>
            {% endif %}
        {# logged user is admin #}
        {% else %}
            {# show Superadmin #}
            {% if user.id_pravo == 1 %}
                <td>SuperAdmin</td>
                <td></td>
            {# show Admin#}
            {% elseif user.id_pravo == 2 %}
                <td>Admin</td>
                <td></td>
            {# user isnt admin or superadmin so u can change his role or ban him #}
            {% else %}
                <td style="width: 20%;">
                    <select class="form-select form-select-sm" aria-label="Default select example">
                    {# going through all rights#}
                    {% for right in allRights %}
                        {# if right is SuperAdmin dont show option #}
                        {% if right.nazev == "SuperAdmin" %}
                        {# else show name of right#}
                        {% else %}
                            <option value="{{ right.id_pravo }}"
                            {# if user right is is same as right id -> selected#}
                            {% if user.id_pravo == right.id_pravo %}
                                selected
                            {% endif %}
                            >{{ right.nazev }}</option>
                        {% endif%}
                    {% endfor %}
                    </select>
                </td>
                <td style="text-align: center">
                    {# dont show ban button if id of user is same as logged or if user id of right is 1 or 2 #}
                    {% if user.id_uzivatel != loggedUser.id_uzivatel and user.id_pravo != 2 and user.id_pravo != 1 %}
                        <form method="post" >
                            <input type="hidden" name="id_user" value="{{ user.id_uzivatel }}">
                            <button type="submit" class="btn btn-danger" name="action" value="ban">Zakázat</button>
                        </form>

                    {%  endif %}
                </td>
            {% endif%}
        {% endif %}
    </tr>
{% endmacro %}